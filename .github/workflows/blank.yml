# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
          name: 'Test to Personal Org'
          script:
                            
                    - export CLIURL=https://developer.salesforce.com/media/salesforce-cli/sfdx-linux-amd64.tar.xz  
                    - export SFDX_AUTOUPDATE_DISABLE=false
                    - export SFDX_USE_GENERIC_UNIX_KEYCHAIN=true
                    - export SFDX_DOMAIN_RETRY=300
                    - export SFDX_DISABLE_APP_HUB=true
                    - export SFDX_LOG_LEVEL=DEBUG
                    - export ROOTDIR=src/
                    #Create sfdx directory
                    - mkdir sfdx
                    #Install Salesforce CLI
                    - wget -qO- $CLIURL | tar xJ -C sfdx --strip-components 1
                    - "./sfdx/install"
                    - export PATH=./sfdx/$(pwd):$PATH
                    - sfdx auth:jwt:grant -u prabhatjha25@gmail.com -i 3MVG9ZL0ppGP5UrAGmwExlELn2uWLTQfoq23TAfP9nWuc_wTJr7iLFrqpqGCX.V29c0SG2XQGppuukBGn3iVB -f server.key
      
   
